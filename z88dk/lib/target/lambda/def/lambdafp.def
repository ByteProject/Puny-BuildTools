lstoff

; Lambda 8300 stack calculator functions (lambda variant of ZXFP and 81FP)

; $Id: lambdafp.def,v 1.3 2015-10-06 06:34:14 stefano Exp $

; function codes:

		; RST 30h activates the FP calculator
		DEFC	ZXFP_BEGIN_CALC	= $30

		DEFC	ZXFP_STK_PTR	= $401C

		DEFC	ZXFP_STK_STORE	= $13BC
		DEFC	ZXFP_TEST_5_FP	= $13F2
		DEFC	ZXFP_STK_STR	= $13BC
		DEFC	ZXFP_STK_FETCH	= $20
		DEFC	ZXFP_STACK_A	= $0779
		DEFC	ZXFP_STACK_BC	= $077E
		DEFC	ZXFP_FP_TO_BC	= $0555
		DEFC	ZXFP_FP_TO_A	= $0549
		
		DEFC	ZXFP_INT_TO_FP	= $1C44
		DEFC	ZXFP_DEC_TO_FP	= $11C1

		DEFC	ZXFP_JUMP_TRUE	= $34
		DEFC	ZXFP_EXCHANGE	= $33
		DEFC	ZXFP_DELETE	= $35

		DEFC	ZXFP_SUBTRACT	= $1E
		DEFC	ZXFP_MULTIPLY	= $1F
		DEFC	ZXFP_DIVISION	= $20
		DEFC	ZXFP_TO_POWER	= $21
		DEFC	ZXFP_OR		= $22
		DEFC	ZXFP_NO_AND_NO	= $23
		DEFC	ZXFP_NO_L_EQL	= $24
		DEFC	ZXFP_NO_GR_EQL	= $25
		DEFC	ZXFP_NOS_NEQL	= $26
		DEFC	ZXFP_NO_GRTR	= $27
		DEFC	ZXFP_NO_LESS	= $28
		DEFC	ZXFP_NOS_EQL	= $29

		DEFC	ZXFP_ADDITION	= $2A

		DEFC	ZXFP_STR_AND_NO	= $2B	; String and Number
		DEFC	ZXFP_STR_L_EQL	= $2C	; String <=
		DEFC	ZXFP_STR_GR_EQL	= $2D	; String >=
		DEFC	ZXFP_STRS_NEQL	= $2E	; String <>
		DEFC	ZXFP_STRS_GRTR	= $2F	; String >
		DEFC	ZXFP_STRS_LESS	= $30	; String <
		DEFC	ZXFP_STRS_EQL	= $31	; String =
		DEFC	ZXFP_STRS_ADD	= $32	; String addition
		
		DEFC	ZXFP_NEGATE	= $09

		DEFC	ZXFP_CODE	= $0A
		DEFC	ZXFP_VAL	= $0B
		DEFC	ZXFP_LEN	= $0C

		DEFC	ZXFP_SIN	= $0D
		DEFC	ZXFP_COS	= $0E
		DEFC	ZXFP_TAN	= $0F
		DEFC	ZXFP_ASN	= $10
		DEFC	ZXFP_ACS	= $11
		DEFC	ZXFP_ATN	= $12
		DEFC	ZXFP_LN 	= $13
		DEFC	ZXFP_EXP	= $14
		DEFC	ZXFP_INT	= $15
		DEFC	ZXFP_SQR	= $16
		DEFC	ZXFP_SGN	= $17
		DEFC	ZXFP_ABS	= $18

		DEFC	ZXFP_PEEK	= $19
		DEFC	ZXFP_USR_NO	= $1A
		
		DEFC	ZXFP_STRS	= $1B
		DEFC	ZXFP_CHRS	= $1C
		DEFC	ZXFP_NOT	= $1D

		DEFC	ZXFP_DUPLICATE	= $01
		DEFC	ZXFP_N_MOD_M	= $06
		
		DEFC	ZXFP_JUMP	= $04
		DEFC	ZXFP_STK_DATA	= $05
		;; DEFC	ZXFP_DEC_JR_NZ	= $?? << missing on the LAMBDA 8300
		
		DEFC	ZXFP_LESS_0	= $03
		DEFC	ZXFP_GREATER_0	= $02
		
		DEFC	ZXFP_END_CALC	= $00	; END

		DEFC	ZXFP_GET_ARGT	= $07
		;; DEFC	ZXFP_TRUNCATE	= $?? << missing on the LAMBDA 8300
		;;DEFC	ZXFP_FP_CALC_2	= $?? << missing on the LAMBDA 8300

		DEFC	ZXFP_E_TO_FP	= $08
		
		DEFC	ZXFP_SERIES_00	= $60
		DEFC	ZXFP_SERIES_01	= $61
		DEFC	ZXFP_SERIES_02	= $62
		DEFC	ZXFP_SERIES_03	= $63
		DEFC	ZXFP_SERIES_04	= $64
		DEFC	ZXFP_SERIES_05	= $65
		DEFC	ZXFP_SERIES_06	= $66
		DEFC	ZXFP_SERIES_07	= $67
		DEFC	ZXFP_SERIES_08	= $68
		DEFC	ZXFP_SERIES_09	= $69
		DEFC	ZXFP_SERIES_0A	= $6A
		DEFC	ZXFP_SERIES_0B	= $6B
		DEFC	ZXFP_SERIES_0C	= $6C
		DEFC	ZXFP_SERIES_0D	= $6D
		DEFC	ZXFP_SERIES_0E	= $6E
		DEFC	ZXFP_SERIES_0F	= $6F

		DEFC	ZXFP_STK_ZERO	= $7A
		DEFC	ZXFP_STK_ONE	= $79
		DEFC	ZXFP_STK_HALF	= $78
		DEFC	ZXFP_STK_PI_D_2	= $70
		DEFC	ZXFP_STK_TEN	= $77
		
		DEFC	ZXFP_ST_MEM_0	= $50
		DEFC	ZXFP_ST_MEM_1	= $55
		DEFC	ZXFP_ST_MEM_2	= $5A		
		DEFC	ZXFP_ST_MEM_3	= $5F

		DEFC	ZXFP_GET_MEM_0	= $40
		DEFC	ZXFP_GET_MEM_1	= $45
		DEFC	ZXFP_GET_MEM_2	= $4A
		DEFC	ZXFP_GET_MEM_3	= $4F

		; System variables
		DEFC	ZXFP_CH_ADD	= $4016

lston
